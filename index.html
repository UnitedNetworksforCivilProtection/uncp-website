<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>United Networks for Civil Protection (UNCP)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: url('images/humanitarian-children.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #333;
    }
    header {
      background: rgba(255, 255, 255, 0.9);
      padding: 10px 20px;
      border-bottom: 2px solid #ff6600;
    }
    header h1 {
      color: #ff6600;
      font-size: 1.8rem;
      margin: 0;
    }
    nav a {
      margin-right: 15px;
      color: #333;
      text-decoration: none;
      font-weight: bold;
    }
    nav a:hover {
      color: #ff6600;
    }
    .hero {
      text-align: center;
      padding: 100px 20px;
      background: rgba(255, 255, 255, 0.8);
      margin-bottom: 20px;
    }
    .content-section {
      display: none;
      padding: 40px 20px;
      background: rgba(255, 255, 255, 0.9);
      margin: 20px;
      border-radius: 10px;
    }
    footer {
      background: #333;
      color: #fff;
      padding: 20px;
      margin-top: 40px;
    }
    footer a {
      color: #ff6600;
      margin-right: 10px;
    }
    fieldset {
      display: none;
    }
    fieldset.active {
      display: block;
    }
  </style>
</head>
<body>

<header class="d-flex justify-content-between align-items-center">
  <h1>Welcome to United Networks for Civil Protection (UNCP)</h1>
  <nav>
    <a href="#" onclick="toggleHome()">Home</a>
    <a href="#" onclick="toggleOverview()">Overview</a>
    <a href="#" onclick="toggleCareers()">Careers</a>
    <a href="#">Donate</a>
  </nav>
</header>

<div class="hero">
  <h2>Protecting and Empowering Vulnerable Communities</h2>
  <p>Together for children, youth, and vulnerable populations</p>
</div>

<!-- Overview Section -->
<section id="overview" class="content-section">
  <h2>Overview</h2>
  <h4>1.1 Brief History of UNCP</h4>
  <p>United Networks for Civil Protection (UNCP) was founded in 2018 by two child protection specialists ... advancing long-term protection, psychosocial support, and youth empowerment across the region.</p>
  <h4>2. Mission and Vision</h4>
  <p><strong>Mission:</strong> To protect and empower vulnerable children, youth, and communities through rights-based, locally led programs ...</p>
  <p><strong>Vision:</strong> A safe, inclusive, and resilient society where every child and vulnerable person can thrive with dignity and equal opportunity.</p>
</section>

<!-- Careers Section -->
<section id="careers-section" class="content-section">
  <h2>Careers</h2>
  <p>We are always looking for passionate people. Current opening:</p>
  <p><a href="pdfs/UNCP_ChildProtectionJD.pdf" download>Download Child Protection Officer JD (PDF)</a></p>
  <button class="btn btn-primary" onclick="toggleApplicationForm()">Apply Now</button>
</section>

<!-- Application Form -->
<section id="application-form" class="content-section">
  <h2>Job Application Form</h2>
  <form id="multiStepForm">
    <!-- Step 1: My Information -->
    <fieldset class="active">
      <legend>My Information</legend>
      <label>How Did You Hear About Us?</label>
      <select name="HowDidYouHear">
        <option>Job Board</option>
        <option>Social Media</option>
        <option>UNCP Website Career Page</option>
        <option>Other</option>
      </select><br>
      <label>Have you previously worked for UNCP?</label>
      <select name="PreviouslyWorked">
        <option>No</option>
        <option>Yes</option>
      </select><br>
      <label>Full Name*</label>
      <input type="text" name="FullName" required><br>
      <label>Current Address*</label>
      <input type="text" name="Address" required><br>
      <label>Email Address*</label>
      <input type="email" name="Email Address" required><br>
      <label>Phone Number*</label>
      <input type="tel" name="PhoneNumber" required><br>
      <button type="button" onclick="nextStep()">Next</button>
    </fieldset>

    <!-- Step 2: Experience -->
    <fieldset>
      <legend>My Experience</legend>
      <label>Job Title*</label>
      <input type="text" name="JobTitle" required><br>
      <label>Company*</label>
      <input type="text" name="Company" required><br>
      <label>Location*</label>
      <input type="text" name="Location" required><br>
      <label>Role Description</label>
      <textarea name="RoleDescription"></textarea><br>
      <button type="button" onclick="prevStep()">Back</button>
      <button type="button" onclick="nextStep()">Next</button>
    </fieldset>

    <!-- Step 3: Education -->
    <fieldset>
      <legend>Education</legend>
      <label>School/University*</label>
      <input type="text" name="School" required><br>
      <label>Degree*</label>
      <input type="text" name="Degree" required><br>
      <label>Field of Study</label>
      <input type="text" name="Field"><br>
      <button type="button" onclick="prevStep()">Back</button>
      <button type="button" onclick="nextStep()">Next</button>
    </fieldset>

    <!-- Step 4: Review -->
    <fieldset>
      <legend>Review & Submit</legend>
      <p>Please review your information before submitting.</p>
      <button type="button" onclick="prevStep()">Back</button>
      <button type="button" onclick="generatePDFandSubmit()">Submit</button>
    </fieldset>
  </form>
</section>

<!-- Footer -->
<footer>
  <div class="container">
    <p><strong>Telephone:</strong> +256702398687 / +256779576538<br>
    <strong>Address:</strong> P.O. Box 341054, Arua City, Uganda</p>
    <p>
      <a href="#"><i class="bi bi-facebook"></i></a>
      <a href="#"><i class="bi bi-twitter-x"></i></a>
      <a href="#"><i class="bi bi-instagram"></i></a>
      <a href="#"><i class="bi bi-youtube"></i></a>
      <a href="#"><i class="bi bi-tiktok"></i></a>
      <a href="#"><i class="bi bi-linkedin"></i></a>
    </p>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
let currentStep = 0;
const steps = document.querySelectorAll("form fieldset");
function showStep(n){ steps.forEach((fs,i)=>fs.classList.toggle("active",i===n)); }
function nextStep(){ if(currentStep<steps.length-1){currentStep++;showStep(currentStep);} }
function prevStep(){ if(currentStep>0){currentStep--;showStep(currentStep);} }

function toggleOverview(){document.getElementById('overview').style.display='block';document.getElementById('careers-section').style.display='none';document.getElementById('application-form').style.display='none';}
function toggleCareers(){document.getElementById('overview').style.display='none';document.getElementById('careers-section').style.display='block';document.getElementById('application-form').style.display='none';}
function toggleApplicationForm(){document.getElementById('overview').style.display='none';document.getElementById('careers-section').style.display='none';document.getElementById('application-form').style.display='block';}
function toggleHome(){document.getElementById('overview').style.display='none';document.getElementById('careers-section').style.display='none';document.getElementById('application-form').style.display='none';}

async function generatePDFandSubmit(){
  const { jsPDF } = window.jspdf;
  const form=document.getElementById("multiStepForm");
  const formData=new FormData(form);
  let doc=new jsPDF();
  let y=10;
  formData.forEach((v,k)=>{doc.text(`${k}: ${v}`,10,y);y+=10;});
  const pdfBlob=doc.output('blob');
  const data=new FormData();
  data.append("pdf",pdfBlob,"application.pdf");
  data.append("formData",JSON.stringify(Object.fromEntries(formData)));
  try{
    const res=await fetch("send_application.php",{method:"POST",body:data});
    const result=await res.json();
    alert(result.message||"Application submitted successfully!");
    form.reset();currentStep=0;showStep(currentStep);
  }catch(err){alert("Submission failed: "+err.message);}
}
</script>
</body>
</html>
