<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>United Networks for Civil Protection (UNCP)</title>
<link rel="icon" href="logo.jpeg">
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="https://cdn.emailjs.com/sdk/3.2/email.min.js"></script>
<style>
  body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#f4f6f9;color:#222}
  .container{max-width:1100px;margin:18px auto;padding:0 16px}
  header{display:flex;align-items:center;justify-content:space-between;padding:12px;background:#fff;border-bottom:1px solid #e6eefc;position:sticky;top:0;z-index:1000}
  .brand img{height:120px}
  nav ul{display:flex;gap:12px;list-style:none;margin:0;padding:0;align-items:center}
  nav a{color:#0b3b66;font-weight:700;padding:8px;border-radius:6px;text-decoration:none}
  .donate{background:#ff7f00;color:#fff;padding:8px 12px;border-radius:8px}
  section{background:#fff;margin:18px 0;padding:18px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,.04)}
  h1,h2{color:#083e6b}
  .accordion{margin-top:12px}
  .accordion-item{border:1px solid #e6eefc;border-radius:8px;margin-bottom:10px;overflow:hidden}
  .accordion-header{background:#f7fbff;padding:12px;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
  .accordion-body{max-height:0;overflow:hidden;transition:max-height .28s ease;padding:0 12px}
  .accordion-item.active .accordion-body{padding:12px}
  form label{display:block;margin-top:10px;font-weight:700}
  input,select,textarea{width:100%;padding:8px;border-radius:6px;border:1px solid #d6d6d6;margin-top:6px}
  .btn{background:#0b62a6;color:#fff;padding:8px 12px;border-radius:8px;border:none;cursor:pointer;margin-top:12px}
  .btn.secondary{background:#eef4ff;color:#0b62a6}
  .inline{display:flex;gap:12px}
  .chip{display:inline-block;padding:6px 10px;border-radius:999px;border:1px dashed #0b62a6;margin:4px}
  footer{background:#083e6b;color:#fff;padding:24px;border-radius:10px;margin-top:18px}
  .footer-socials a{margin-right:12px;color:#fff;font-size:22px;text-decoration:none;transition:transform .3s}
  .footer-socials a:hover{transform:scale(1.4) rotate(10deg)}
  .form-step{display:none;border:1px solid #e6eefc;border-radius:10px;padding:16px;margin-top:12px;background:#fefefe}
  .card{border-left:4px solid #083e6b;padding:12px;margin-bottom:12px;background:#fff;border-radius:6px;box-shadow:0 2px 4px rgba(0,0,0,0.08)}
</style>
</head>
<body>
<div class="container">

  <!-- Header -->
  <header>
    <a href="#home"><img src="logo.jpeg" alt="UNCP Logo"></a>
    <nav>
      <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#what-we-do">What We Do</a></li>
        <li><a href="#where-we-work">Where We Work</a></li>
        <li><a href="#careersSection">Careers</a></li>
        <li><a href="#donate" class="donate">Donate</a></li>
      </ul>
    </nav>
  </header>

  <!-- Home Section -->
  <section id="home">
    <h1>United Networks for Civil Protection (UNCP)</h1>
    <p><strong>Type:</strong> Community-Based Organization</p>
    <p><strong>Incorporated:</strong> Company Limited by Guarantee, Uganda</p>
    <p>We protect and empower vulnerable children, youth, and communities in refugee & host settings.</p>
  </section>

  <!-- About / What we do / Where we work -->
  <section id="about" class="accordion">
    <div class="accordion-item">
      <div class="accordion-header">About UNCP <span>+</span></div>
      <div class="accordion-body">
        <h3>Overview</h3>
        <p>UNCP is a community-based organization focused on child protection, GBV prevention, and youth empowerment.</p>
        <h4>History</h4>
        <p>Founded in 2018 by child protection specialists...</p>
        <h4>Mission & Vision</h4>
        <p>Mission: ... Vision: ...</p>
      </div>
    </div>
    <div class="accordion-item">
      <div class="accordion-header">What We Do <span>+</span></div>
      <div class="accordion-body">
        <ul>
          <li>Child Protection</li>
          <li>GBV Prevention</li>
          <li>MHPSS</li>
          <li>Youth Empowerment</li>
          <li>Climate & Livelihoods</li>
          <li>Inclusive Education</li>
        </ul>
      </div>
    </div>
    <div class="accordion-item">
      <div class="accordion-header">Where We Work <span>+</span></div>
      <div class="accordion-body">
        <p>Uganda — districts we work in:</p>
        <div style="display:flex;flex-wrap:wrap;gap:8px">
          <span class="chip">Arua City</span><span class="chip">Arua District</span><span class="chip">Madi Okollo</span>
          <span class="chip">Terego</span><span class="chip">Adjumani</span><span class="chip">Moyo</span><span class="chip">Obongi</span>
          <span class="chip">Pakwach</span><span class="chip">Nebbi</span><span class="chip">Koboko</span><span class="chip">Yumbe</span>
          <span class="chip">Zombo</span><span class="chip">Maracha</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Careers Section -->
  <section id="careersSection">
    <h2>Open Positions</h2>
    <div id="jobList">
      <div class="job card" data-deadline="2025-09-24">
        <strong>Child Protection Case Worker (Volunteer)</strong>
        <div style="margin-top:6px;color:#444">Arua City • 6 months • Application: 10 Sep 2025 – 24 Sep 2025</div>
        <div style="margin-top:8px">
          <button class="btn" onclick="showJD('Child Protection Case Worker (Volunteer)')">View JD</button>
          <button class="btn" onclick="startApplication('Child Protection Case Worker (Volunteer)','2025-09-24')">Apply</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Job Description Modal -->
  <div id="jdModal" style="display:none;position:fixed;left:50%;top:6%;transform:translateX(-50%);max-width:900px;width:92%;background:#fff;padding:16px;border-radius:10px;box-shadow:0 20px 60px rgba(0,0,0,.25);z-index:3000;">
    <div id="jdContent"></div>
    <div style="text-align:right;margin-top:12px"><button onclick="closeJD()" class="btn secondary">Close</button></div>
  </div>

  <!-- Hidden Multi-Step Application Form -->
  <section id="application" class="card" style="padding:16px;display:none">
    <h2>Application Form</h2>
    <form id="careersForm">
      <input type="hidden" name="position_title" id="position_title" value="">

      <!-- Step 1: Personal Info -->
      <div class="form-step" data-step="1">
        <h3>Step 1 — Personal Information</h3>
        <label>Full Name *</label><input type="text" name="candidate_name" required>
        <label>Email *</label><input type="email" name="candidate_email" required>
        <label>Phone *</label><input type="tel" name="candidate_phone" required>
        <div class="btn-group"><button type="button" class="btn" onclick="goToStep(2)">Next</button></div>
      </div>

      <!-- Step 2: Work Experience -->
      <div class="form-step" data-step="2">
        <h3>Step 2 — Work Experience</h3>
        <div id="workExpWrap"></div>
        <button type="button" class="btn secondary" onclick="addWorkExp()">Add More</button>
        <div class="btn-group"><button type="button" class="btn secondary" onclick="goToStep(1)">Back</button><button type="button" class="btn" onclick="goToStep(3)">Next</button></div>
      </div>

      <!-- Step 3: Education -->
      <div class="form-step" data-step="3">
        <h3>Step 3 — Education</h3>
        <div id="eduWrap"></div>
        <button type="button" class="btn secondary" onclick="addEdu()">Add More</button>
        <div class="btn-group"><button type="button" class="btn secondary" onclick="goToStep(2)">Back</button><button type="button" class="btn" onclick="goToStep(4)">Next</button></div>
      </div>

      <!-- Step 4: Certifications -->
      <div class="form-step" data-step="4">
        <h3>Step 4 — Certifications</h3>
        <div id="certWrap"></div>
        <button type="button" class="btn secondary" onclick="addCert()">Add More</button>
        <div class="btn-group"><button type="button" class="btn secondary" onclick="goToStep(3)">Back</button><button type="button" class="btn" onclick="goToStep(5)">Next</button></div>
      </div>

      <!-- Step 5: Languages -->
      <div class="form-step" data-step="5">
        <h3>Step 5 — Languages</h3>
        <div id="langWrap"></div>
        <button type="button" class="btn secondary" onclick="addLang()">Add More</button>
        <div class="btn-group"><button type="button" class="btn secondary" onclick="goToStep(4)">Back</button><button type="button" class="btn" onclick="goToStep(6)">Next</button></div>
      </div>

      <!-- Step 6: References -->
      <div class="form-step" data-step="6">
        <h3>Step 6 — References</h3>
        <div id="refWrap"></div>
        <button type="button" class="btn secondary" onclick="addRef()">Add More</button>
        <div class="btn-group"><button type="button" class="btn secondary" onclick="goToStep(5)">Back</button><button type="button" class="btn" onclick="goToStep(7)">Next</button></div>
      </div>

      <!-- Step 7: Additional Info -->
      <div class="form-step" data-step="7">
        <h3>Step 7 — Additional Information</h3>
        <label>Why do you want to work with UNCP?</label>
        <textarea name="additional_info" rows="4"></textarea>
        <div class="btn-group"><button type="button" class="btn secondary" onclick="goToStep(6)">Back</button><button type="button" class="btn" onclick="goToStep(8)">Next</button></div>
      </div>

      <!-- Step 8: Review & Submit -->
      <div class="form-step" data-step="8">
        <h3>Step 8 — Review & Submit</h3>
        <p>Please review your information and click Submit.</p>
        <div class="btn-group"><button type="button" class="btn secondary" onclick="goToStep(7)">Back</button><button type="button" class="btn" onclick="submitForm()">Submit</button></div>
      </div>
    </form>
    <div id="submitInfo" style="display:none">
      <h2>Submitting...</h2>
      <p id="submitStatus">Please wait while we process your application.</p>
    </div>
  </section>

  <!-- Donate / Contact -->
  <section id="donate" class="card">
    <h2>Donate / Contact</h2>
    <p>Email: <a href="mailto:uncip2019@gmail.com">uncip2019@gmail.com</a></p>
    <p>Tel: +256 702 398687 / +256 779 576538</p>
  </section>

  <!-- Artistic Footer -->
  <footer>
    <div style="display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap">
      <div><img src="logo.jpeg" alt="UNCP" style="height:56px"></div>
      <div>
        <p><strong>Contact</strong></p>
        <p>Email: <a href="mailto:uncip2019@gmail.com" style="color:#fff">uncip2019@gmail.com</a><br>Tel: +256 702 398687 / +256 779 576538</p>
      </div>
      <div>
        <p><strong>Follow</strong></p>
        <div class="footer-socials">
          <a href="#" title="Facebook">F</a>
          <a href="#" title="Twitter">T</a>
          <a href="#" title="Instagram">I</a>
          <a href="#" title="YouTube">Y</a>
        </div>
      </div>
    </div>
  </footer>
</div>

<script>
emailjs.init("YOUR_EMAILJS_USER_ID");

// Accordion
document.querySelectorAll('.accordion-item .accordion-header').forEach(h=>{
  h.addEventListener('click', ()=>{
    const item = h.parentElement;
    item.classList.toggle('active');
    const body = item.querySelector('.accordion-body');
    if(item.classList.contains('active')) {body.style.maxHeight = body.scrollHeight + 'px'; h.querySelector('span').innerText = '−';}
    else {body.style.maxHeight = null; h.querySelector('span').innerText = '+';}
  });
});

// Job description modal
const jobDescriptions = {
  "Child Protection Case Worker (Volunteer)": `<h3>Child Protection Case Worker (Volunteer)</h3>
    <p>Purpose: Provide direct support to children at risk, case management, PSS and community engagement.</p>
    <h4>Responsibilities</h4><ul><li>Case intake & management</li><li>PSS and referrals</li><li>Community awareness</li></ul>
    <h4>Qualifications</h4><p>Degree/diploma in Social Work, Psychology or related field; prior experience advantageous.</p>`
};
function showJD(title){document.getElementById('jdContent').innerHTML = jobDescriptions[title] || '<p>Job description not found.</p>';document.getElementById('jdModal').style.display='block';}
function closeJD(){ document.getElementById('jdModal').style.display = 'none'; }

// Start application
function startApplication(position){
  document.getElementById('jdModal').style.display = 'none';
  const appSection = document.getElementById('application');
  appSection.style.display = 'block';
  appSection.scrollIntoView({behavior:'smooth'});
  document.getElementById('position_title').value = position;
  showStep(1);
}

// Hide expired jobs
(function(){
  const today = new Date();
  document.querySelectorAll('#jobList .job').forEach(job=>{
    const d = job.dataset.deadline;
    if(d && new Date(d + 'T23:59:59') < today) job.style.display = 'none';
  });
})();

// Multi-step form logic
let currentStep=1;
function showStep(step){
  document.querySelectorAll('.form-step').forEach(fs=>fs.style.display='none');
  document.querySelector(`.form-step[data-step="${step}"]`).style.display='block';
  currentStep=step;
}
function goToStep(step){showStep(step);}

// Dynamic fields
function addWorkExp(){ const div=document.createElement('div'); div.innerHTML=`<label>Company</label><input type="text" name="company[]"><label>Role</label><input type="text" name="role[]"><label>From</label><input type="month" name="from[]"><label>To</label><input type="month" name="to[]">`; document.getElementById('workExpWrap').appendChild(div);}
function addEdu(){ const div=document.createElement('div'); div.innerHTML=`<label>Institution</label><input type="text" name="institution[]"><label>Degree/Qualification</label><input type="text" name="degree[]"><label>Year</label><input type="number" name="year[]">`; document.getElementById('eduWrap').appendChild(div);}
function addCert(){ const div=document.createElement('div'); div.innerHTML=`<label>Certification</label><input type="text" name="certification[]"><label>Year</label><input type="number" name="cert_year[]">`; document.getElementById('certWrap').appendChild(div);}
function addLang(){ const div=document.createElement('div'); div.innerHTML=`<label>Language</label><input type="text" name="language[]"><label>Proficiency</label><input type="text" name="language_level[]">`; document.getElementById('langWrap').appendChild(div);}
function addRef(){ const div=document.createElement('div'); div.innerHTML=`<label>Reference Name</label><input type="text" name="ref_name[]"><label>Relation</label><input type="text" name="ref_relation[]"><label>Contact</label><input type="text" name="ref_contact[]">`; document.getElementById('refWrap').appendChild(div);}

// Form submission with PDF and EmailJS
function submitForm(){
  const form=document.getElementById('careersForm');
  const formData=new FormData(form);
  const dataObj={};
  formData.forEach((v,k)=>{
    if(k.endsWith('[]')){ const key=k.slice(0,-2); if(!dataObj[key]) dataObj[key]=[]; dataObj[key].push(v);}
    else dataObj[k]=v;
  });

  // Generate PDF
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(16);
  doc.text(`Application — ${dataObj.position_title}`,10,10);
  let y=20;
  for(const key in dataObj){ 
    const val = Array.isArray(dataObj[key])?dataObj[key].join(', '):dataObj[key]; 
    doc.setFontSize(12); doc.text(`${key}: ${val}`,10,y); y+=8;
  }
  const pdfBlob=doc.output('blob');

  // EmailJS send
  document.getElementById('careersForm').style.display='none';
  document.getElementById('submitInfo').style.display='block';
  document.getElementById('submitStatus').innerText='Sending application...';
  const emailParams={position:dataObj.position_title,from_name:dataObj.candidate_name,email:dataObj.candidate_email,message:'See attached PDF',attachment:pdfBlob};
  emailjs.send('YOUR_SERVICE_ID','YOUR_TEMPLATE_ID',emailParams)
    .then(res=>{document.getElementById('submitStatus').innerText='Application submitted successfully!';})
    .catch(err=>{document.getElementById('submitStatus').innerText='Error submitting application, try again later.';});
}
</script>
</body>
</html>
